# Nombre genérico para el grupo de módulos
ngx_addon_name=ngx_http_custom_modules_collection

# Buscamos todos los archivos .c en esta carpeta
for ngx_src_file in $ngx_addon_dir/*.c
do
    # Extraemos el nombre del archivo sin extensión
    mod_name=$(basename "$ngx_src_file" .c)
    
    # Registramos el módulo en Nginx
    # Esto asume que dentro del .c definiste: ngx_module_t ngx_http_<nombre>_module
    HTTP_MODULES="$HTTP_MODULES ngx_http_${mod_name}_module"
    NGX_ADDON_SRCS="$NGX_ADDON_SRCS $ngx_src_file"
    
    echo " + Modulo custom detectado: $mod_name"
done